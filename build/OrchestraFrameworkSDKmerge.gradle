apply plugin : "base"
apply from : "http://repo.orchestra/plugins-releases-local/com/thalesgroup/gradle/plugins/hudsonjobinfos/1.0/hudsonjobinfos-1.0.gradle"

defaultTasks "workClean", "zipDelivery"

def dist       = "${workspace}/dist"
def buildDir   = "${workspace}/work/${timestamp}"

task workClean << {
    println "Cleaning dist dir..."
    ant.delete(dir : dist)
}

task zipDelivery (type : Zip) {
    version = "$version.$timestamp"
    destinationDir = file(dist)
    baseName = "OrchestraFrameworkSDK"
    into("doc") {
		from("I:/delivery_Documentation/OrchestraFrameworkSDK/latest-v5/SUM_OrchestraFrameworkSDK.pdf")
	}
	from zipTree("${buildDir}/com.thalesgroup.orchestra.framework.common.feature-${timestamp}.zip")
	from zipTree("${buildDir}/com.thalesgroup.orchestra.framework.root.ui.feature-${timestamp}.zip")
    from zipTree("${buildDir}/com.thalesgroup.orchestra.framework.sdk.feature-${timestamp}.zip")
}